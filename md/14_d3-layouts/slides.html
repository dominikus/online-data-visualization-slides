<section><h1 class="title">d3 layouts</h1></section>

<section>
  <h3>d3 Layouts</h3>
  <p>d3 has several predefined layouts to help with generating charts.</p>
  <a class="source" href="https://github.com/d3/d3/wiki/Gallery" target="_blank"><p>d3 Gallery</p></a>
</section>

<section><h3>d3 Layouts</h3>
  <p>All of your favorites should be there:</p>
  <ul><li>cluster</li><li>tree</li><li>treemap</li><li>partition</li><li>pack</li><li>chord</li><li>forces</li></ul>
</section>

<section><h3>d3 Layouts</h3>
  <p>All layouts have in common that they're not drawing anything - 
    they're only doing data manipulation to have an easier time drawing.</p>
  </section>

<!-- CHORD DIAGRAMS -->

<section><h1>Chord diagrams</h1></section>

<section><h3>Chord diagrams</h3>
  <p>Chord layouts show object-to-object relationships.</p>
  <img data-src="md/14_d3-layouts/chord-diagram.png" />
</section>

<section><h3>Chord diagrams</h3>
  <p>d3 provides <code>d3.chord</code> to calculate the outer ring segments.<br/>
    <code>d3.ribbon</code> calculates the connecting ribbons between those segments.</p>
  </section>

<section><h3>Chord diagrams</h3>
  <p>Let's play around with Mike Bostock's Chord Diagram example
    (in code/d3-layouts/01_bostock_chord.html)</p>
<a class="source" href="https://bl.ocks.org/mbostock/4062006" target="_blank"><p>Mike Bostock: Chord Diagram</p></a>
</section>

<section><h1>Hierarchies</h1></section>

<section><h3>Hierarchies</h3>
  <p>Most layouts are based on some type of hierarchical data. More tree than list.</p>
</section>

<section><h3>Hierarchies</h3>
  <p>Tabular data (such as CSVs) needs to be converted to a hierarchy (Object) format first, before
    the d3 hierarchical layouts can use it.</p>
  </section>

<section><h3>Hierarchies</h3>
  <p>You can use <code>d3.stratify</code> to do that:</p>
  <pre><code class="javascript">var data = [{}, {}, {}, ...];

var root = d3.stratify()
  .parentId(function(d){ return d.parent; })
  (data);
  </code></pre>
</section>

<section><h3>Hierarchies</h3>
  <p>Try loading and stratifying the data in code/d3-layouts/02_hierarchical_data.html</p>
</section>

<section><h3>Hierarchies</h3>
  <p>One special weirdness of <code>d3.stratify</code>: every parent
    node needs it own entry in the data!</p>
<pre><code>id; region;
Netherlands; Europe;
Europe; ;     &lt;-- required!
</code></pre>
</section> 

<section><h3>Hierarchies</h3>
  <p>Stratified data becomes a <code>d3.hierarchy</code> object:</p>
  <ul><li><b>.descendants()</b> - returns all children of a node as a flat array</li>
    <li><b>.sum(value)</b> - calculates a node's value (see below)</li>
    <li><b>.depth</b> - depth in the tree</li></ul>
  
    <a class="source" href="https://github.com/d3/d3-hierarchy#hierarchy" target="_blank"><p>d3-hierarchy#hierarchy</p></a>
  </section>

<section><h3>Hierarchies</h3>
  <p>The good news: once the data has been stratified, drawing it is usually very straightforward!</p>
</section>

<!-- CIRCLE PACKING -->

<section><h1>Circle packing</h1></section>

<section><h3>Circle packing</h3>
  <p>To put that to the test: let's draw a circle packing viz based on the data!</p>
  <img data-src="md/14_d3-layouts/circle-pack.png" />
</section> 

<!-- TREES & TREEMAPS -->

<section><h1>Trees & Treemaps</h1></section>

<section><h3>Trees & Treemaps</h3>
  <p>Let's have a look at a Mike Bostock example for drawing a tree based on <code>d3.tree</code>:</p>
  <a class="source" href="https://bl.ocks.org/mbostock/4339184"><p>Mike Bostock: Tidy Tree</p></a>
</section>

<section><h3>Trees & Treemaps</h3>
  <p>Change the world pack layout from before to a tree layout!</p>
</section>

<section><h3>Trees & Treemaps</h3>
  <p>Finally, one last example: the treemap.</p>
  <a class="source" href="https://bl.ocks.org/mbostock/6bbb0a7ff7686b124d80" target="_blank"><p>Mike Bostock: Treemap</p></a>
</section>

<!-- MORE -->
